(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[534],{68511:function(e,t,r){Promise.resolve().then(r.bind(r,27383))},27383:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(15444),a=r(89300),n=r(79047),i=r(33485),o=r(88382),c=r(2422),l=r(74678),d=r(67012),u=r(99827),m=r(34161),f=r(41440),x=r(95854);function h(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),{toast:r}=(0,x.pm)(),[h,y]=(0,a.useState)(null),[g,p]=(0,a.useState)(""),[b,N]=(0,a.useState)(""),[v,j]=(0,a.useState)("NEUTRAL"),[E,D]=(0,a.useState)(!1),[S,A]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let s=async()=>{try{let s=await fetch(`/api/entries/${e.id}`);if(s.ok){let e=await s.json();y(e),p(e.title||""),N(e.content||""),j(e.mood)}else r({title:"Error",description:"Entry not found",variant:"destructive"}),t.push("/entries")}catch(e){console.error("Failed to fetch entry:",e),r({title:"Error",description:"Failed to load entry",variant:"destructive"})}finally{A(!1)}};e.id&&s()},[e.id,t,r]);let w=async()=>{if(h){if(!v){r({title:"Error",description:"Please select your mood",variant:"destructive"});return}if("TEXT"===h.type&&!b.trim()){r({title:"Error",description:"Please enter some content for your text entry",variant:"destructive"});return}D(!0);try{let e={title:g.trim()||void 0,content:b.trim()||void 0,mood:v};if(!(await fetch(`/api/entries/${h.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to update entry");r({title:"Success",description:"Entry updated successfully"}),t.push(`/entries/${h.id}`)}catch(e){console.error("Failed to update entry:",e),r({title:"Error",description:"Failed to update entry. Please try again.",variant:"destructive"})}finally{D(!1)}}};return S?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,s.jsx)(m.m,{title:"Loading...",showBack:!0}),(0,s.jsx)("div",{className:"max-w-2xl mx-auto p-4",children:(0,s.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading entry..."})})]}):h?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,s.jsx)(m.m,{title:"Edit Entry",showBack:!0,action:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to cancel? Your changes will be lost.")&&t.back()},className:"border-gray-600 text-gray-300",disabled:E,children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 mr-1"}),"Cancel"]}),(0,s.jsxs)(c.z,{size:"sm",onClick:w,disabled:E,className:"bg-blue-500 hover:bg-blue-600",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),E?"Saving...":"Save"]})]})}),(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-4 space-y-6",children:[(0,s.jsx)(u.Zb,{className:"bg-gray-800 border-gray-700",children:(0,s.jsx)(u.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"VOICE"===h.type?"\uD83C\uDF99️":"\uD83D\uDCDD"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-200",children:"VOICE"===h.type?"Voice Note":"Text Entry"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Entry type cannot be changed"})]})]})})}),(0,s.jsx)(u.Zb,{className:"bg-gray-800 border-gray-700",children:(0,s.jsx)(u.aY,{className:"p-6",children:(0,s.jsx)(f.Z,{selectedMood:v,onMoodSelect:j})})}),(0,s.jsx)(u.Zb,{className:"bg-gray-800 border-gray-700",children:(0,s.jsxs)(u.aY,{className:"p-6",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-200 mb-3 block",children:"Title (Optional)"}),(0,s.jsx)(l.I,{value:g,onChange:e=>p(e.target.value),placeholder:"Enter a title for this entry...",className:"bg-gray-700 border-gray-600 text-gray-50",disabled:E})]})}),"VOICE"===h.type&&h.voiceUrl&&(0,s.jsx)(u.Zb,{className:"bg-gray-800 border-gray-700",children:(0,s.jsxs)(u.aY,{className:"p-6",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-200 mb-3 block",children:"Voice Recording"}),(0,s.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4 text-center",children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-3",children:"Voice recordings cannot be edited. You can only modify the title, additional notes, and mood."}),(0,s.jsxs)("audio",{controls:!0,className:"w-full",children:[(0,s.jsx)("source",{src:h.voiceUrl,type:"audio/webm"}),"Your browser does not support the audio element."]})]})]})}),(0,s.jsx)(u.Zb,{className:"bg-gray-800 border-gray-700",children:(0,s.jsxs)(u.aY,{className:"p-6",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-200 mb-3 block",children:"VOICE"===h.type?"Additional Notes (Optional)":"Content"}),(0,s.jsx)(d.g,{value:b,onChange:e=>N(e.target.value),placeholder:"VOICE"===h.type?"Add any additional written notes or context...":"Describe your experience, thoughts, or observations...",className:"bg-gray-700 border-gray-600 text-gray-50 min-h-[200px]",disabled:E})]})}),(0,s.jsx)(u.Zb,{className:"bg-blue-900/20 border-blue-700/50",children:(0,s.jsx)(u.aY,{className:"p-4",children:(0,s.jsx)("p",{className:"text-sm text-blue-200",children:"\uD83D\uDD12 Your entries are private and secure. Only you can access your personal documentation."})})})]})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,s.jsx)(m.m,{title:"Entry Not Found",showBack:!0}),(0,s.jsx)("div",{className:"max-w-2xl mx-auto p-4",children:(0,s.jsx)(u.Zb,{className:"bg-gray-800 border-gray-700",children:(0,s.jsxs)(u.aY,{className:"text-center py-12",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-200 mb-2",children:"Entry not found"}),(0,s.jsx)("p",{className:"text-gray-400",children:"This entry may have been deleted or doesn't exist."})]})})})]})}},34161:function(e,t,r){"use strict";r.d(t,{m:function(){return o}});var s=r(15444),a=r(98155),n=r(79047),i=r(2422);function o({title:e,showBack:t=!1,action:r}){let o=(0,n.useRouter)();return(0,s.jsx)("header",{className:"sticky top-0 z-40 bg-gray-900/95 backdrop-blur-sm border-b border-gray-800 mobile-safe-area",children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[t&&(0,s.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>o.back(),className:"h-10 w-10",children:(0,s.jsx)(a.Z,{className:"h-5 w-5"})}),(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-50",children:e})]}),r&&(0,s.jsx)("div",{children:r})]})})}},41440:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(15444),a=r(33186),n=r(65522);function i({selectedMood:e,onMoodSelect:t,className:r}){return(0,s.jsxs)("div",{className:(0,n.cn)("space-y-3",r),children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-200",children:"How are you feeling?"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-3 sm:grid-cols-8",children:["HAPPY","NEUTRAL","ANGRY","SAD","CONFUSED","FRUSTRATED","ANXIOUS","CALM"].map(r=>(0,s.jsxs)("button",{type:"button",onClick:()=>t(r),className:(0,n.cn)("flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all touch-button",e===r?"border-blue-400 bg-blue-400/10 text-blue-400":"border-gray-600 bg-gray-700/50 text-gray-300 hover:border-gray-500 hover:bg-gray-700"),children:[(0,s.jsx)("span",{className:"text-2xl mb-1",children:a.JH[r]}),(0,s.jsx)("span",{className:"text-xs font-medium text-center leading-tight",children:a.aK[r]})]},r))})]})}},2422:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var s=r(15444),a=r(89300),n=r(21030),i=r(2371),o=r(65522);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 touch-button",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-4 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-14 rounded-md px-8",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...i},l)=>{let d=a?n.g7:"button";return(0,s.jsx)(d,{className:(0,o.cn)(c({variant:t,size:r,className:e})),ref:l,...i})});l.displayName="Button"},99827:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var s=r(15444),a=r(89300),n=r(65522);let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},74678:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var s=r(15444),a=r(89300),n=r(65522);let i=a.forwardRef(({className:e,type:t,...r},a)=>(0,s.jsx)("input",{type:t,className:(0,n.cn)("flex h-12 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));i.displayName="Input"},67012:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var s=r(15444),a=r(89300),n=r(65522);let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-none",e),ref:r,...t}));i.displayName="Textarea"},95854:function(e,t,r){"use strict";r.d(t,{pm:function(){return m}});var s=r(89300);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function d(e){l=o(l,e),c.forEach(e=>{e(l)})}function u({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,t]=s.useState(l);return s.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},33186:function(e,t,r){"use strict";r.d(t,{JH:function(){return n},X:function(){return i},aK:function(){return a},eS:function(){return s}});let s={MALE:"Male",FEMALE:"Female",OTHER:"Other",PREFER_NOT_TO_SAY:"Prefer not to say"},a={HAPPY:"Happy",NEUTRAL:"Neutral",ANGRY:"Angry",SAD:"Sad",CONFUSED:"Confused",FRUSTRATED:"Frustrated",ANXIOUS:"Anxious",CALM:"Calm"},n={HAPPY:"\uD83D\uDE0A",NEUTRAL:"\uD83D\uDE10",ANGRY:"\uD83D\uDE20",SAD:"\uD83D\uDE22",CONFUSED:"\uD83E\uDD14",FRUSTRATED:"\uD83D\uDE24",ANXIOUS:"\uD83D\uDE30",CALM:"\uD83D\uDE0C"},i={HAPPY:"#10B981",NEUTRAL:"#6B7280",ANGRY:"#EF4444",SAD:"#3B82F6",CONFUSED:"#F59E0B",FRUSTRATED:"#F97316",ANXIOUS:"#8B5CF6",CALM:"#06B6D4"}},65522:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var s=r(32191),a=r(23607);function n(...e){return(0,a.m6)((0,s.W)(e))}},98155:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(42154).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},88382:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(42154).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},33485:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(42154).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},79047:function(e,t,r){"use strict";var s=r(41206);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[162,386,156,744],function(){return e(e.s=68511)}),_N_E=e.O()}]);