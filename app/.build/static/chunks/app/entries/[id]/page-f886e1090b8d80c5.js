(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[541],{33858:function(e,t,s){Promise.resolve().then(s.bind(s,60729))},60729:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var r=s(15444),a=s(89300),n=s(79047);let i=(0,s(42154).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var c=s(40563),l=s(56603),o=s(64990),d=s(26584),u=s(2422),m=s(99827),x=s(34161),h=s(33186),f=s(15385),y=s(95854);function p(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),{toast:s}=(0,y.pm)(),[p,g]=(0,a.useState)(null),[v,N]=(0,a.useState)(!0),[b,j]=(0,a.useState)(!1),[E,D]=(0,a.useState)(null);(0,a.useEffect)(()=>{let r=async()=>{try{let r=await fetch(`/api/entries/${e.id}`);if(r.ok){let e=await r.json();g(e)}else s({title:"Error",description:"Entry not found",variant:"destructive"}),t.push("/entries")}catch(e){console.error("Failed to fetch entry:",e),s({title:"Error",description:"Failed to load entry",variant:"destructive"})}finally{N(!1)}};e.id&&r()},[e.id,t,s]);let w=async()=>{if(p&&confirm("Are you sure you want to delete this entry?"))try{if((await fetch(`/api/entries/${p.id}`,{method:"DELETE"})).ok)s({title:"Success",description:"Entry deleted successfully"}),t.push("/entries");else throw Error("Failed to delete entry")}catch(e){s({title:"Error",description:"Failed to delete entry",variant:"destructive"})}};return v?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,r.jsx)(x.m,{title:"Loading...",showBack:!0}),(0,r.jsx)("div",{className:"max-w-2xl mx-auto p-4",children:(0,r.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading entry..."})})]}):p?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,r.jsx)(x.m,{title:"Entry Details",showBack:!0,action:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>t.push(`/entry/edit/${p.id}`),className:"border-gray-600 text-gray-300",children:(0,r.jsx)(i,{className:"h-4 w-4"})}),(0,r.jsx)(u.z,{variant:"destructive",size:"sm",onClick:w,children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})})]})}),(0,r.jsxs)("div",{className:"max-w-2xl mx-auto p-4 space-y-6",children:[(0,r.jsx)(m.Zb,{className:"bg-gray-800 border-gray-700",children:(0,r.jsx)(m.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-3xl",children:"VOICE"===p.type?"\uD83C\uDF99ï¸":"\uD83D\uDCDD"}),(0,r.jsx)("span",{className:"text-3xl",children:h.JH[p.mood]})]}),(0,r.jsxs)("div",{className:"flex-1",children:[p.title&&(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-50 mb-2",children:p.title}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[(0,r.jsx)("span",{children:p.createdAt?(0,f.WU)(new Date(p.createdAt),"EEEE, MMMM d, yyyy"):""}),(0,r.jsx)("span",{children:p.createdAt?(0,f.WU)(new Date(p.createdAt),"h:mm a"):""})]}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-gray-700 text-gray-300",children:h.aK[p.mood]})})]})]})})}),"TEXT"===p.type&&p.content&&(0,r.jsx)(m.Zb,{className:"bg-gray-800 border-gray-700",children:(0,r.jsxs)(m.aY,{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:"Content"}),(0,r.jsx)("div",{className:"prose prose-invert max-w-none",children:(0,r.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap leading-relaxed",children:p.content})})]})}),"VOICE"===p.type&&p.voiceUrl&&(0,r.jsx)(m.Zb,{className:"bg-gray-800 border-gray-700",children:(0,r.jsxs)(m.aY,{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:"Voice Note"}),(0,r.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-6 text-center",children:[(0,r.jsxs)("div",{className:"flex justify-center gap-4 mb-4",children:[(0,r.jsxs)(u.z,{onClick:b?()=>{E&&(E.pause(),j(!1),D(null))}:()=>{if(!p?.voiceUrl)return;E&&(E.pause(),D(null));let e=new Audio(p.voiceUrl);e.onended=()=>{j(!1),D(null)},e.onerror=()=>{s({title:"Error",description:"Failed to play voice note",variant:"destructive"}),j(!1),D(null)},e.play(),j(!0),D(e)},size:"lg",className:"bg-blue-500 hover:bg-blue-600",children:[b?(0,r.jsx)(l.Z,{className:"h-5 w-5 mr-2"}):(0,r.jsx)(o.Z,{className:"h-5 w-5 mr-2"}),b?"Pause":"Play"]}),(0,r.jsxs)(u.z,{onClick:()=>{if(!p?.voiceUrl)return;let e=document.createElement("a");e.href=p.voiceUrl,e.download=`voice-note-${p.id}.webm`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},variant:"outline",size:"lg",className:"border-gray-600 text-gray-300",children:[(0,r.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),"Download"]})]}),b&&(0,r.jsx)("p",{className:"text-sm text-blue-400 animate-pulse",children:"Playing voice note..."})]})]})}),"VOICE"===p.type&&p.content&&(0,r.jsx)(m.Zb,{className:"bg-gray-800 border-gray-700",children:(0,r.jsxs)(m.aY,{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:"Additional Notes"}),(0,r.jsx)("div",{className:"prose prose-invert max-w-none",children:(0,r.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap leading-relaxed",children:p.content})})]})})]})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,r.jsx)(x.m,{title:"Entry Not Found",showBack:!0}),(0,r.jsx)("div",{className:"max-w-2xl mx-auto p-4",children:(0,r.jsx)(m.Zb,{className:"bg-gray-800 border-gray-700",children:(0,r.jsxs)(m.aY,{className:"text-center py-12",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-200 mb-2",children:"Entry not found"}),(0,r.jsx)("p",{className:"text-gray-400",children:"This entry may have been deleted or doesn't exist."})]})})})]})}},34161:function(e,t,s){"use strict";s.d(t,{m:function(){return c}});var r=s(15444),a=s(98155),n=s(79047),i=s(2422);function c({title:e,showBack:t=!1,action:s}){let c=(0,n.useRouter)();return(0,r.jsx)("header",{className:"sticky top-0 z-40 bg-gray-900/95 backdrop-blur-sm border-b border-gray-800 mobile-safe-area",children:(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[t&&(0,r.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>c.back(),className:"h-10 w-10",children:(0,r.jsx)(a.Z,{className:"h-5 w-5"})}),(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-50",children:e})]}),s&&(0,r.jsx)("div",{children:s})]})})}},2422:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var r=s(15444),a=s(89300),n=s(21030),i=s(2371),c=s(65522);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 touch-button",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-4 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-14 rounded-md px-8",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...i},o)=>{let d=a?n.g7:"button";return(0,r.jsx)(d,{className:(0,c.cn)(l({variant:t,size:s,className:e})),ref:o,...i})});o.displayName="Button"},99827:function(e,t,s){"use strict";s.d(t,{Ol:function(){return c},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var r=s(15444),a=s(89300),n=s(65522);let i=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));c.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},95854:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var r=s(89300);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},c=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],o={toasts:[]};function d(e){o=c(o,e),l.forEach(e=>{e(o)})}function u({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,t]=r.useState(o);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},33186:function(e,t,s){"use strict";s.d(t,{JH:function(){return n},X:function(){return i},aK:function(){return a},eS:function(){return r}});let r={MALE:"Male",FEMALE:"Female",OTHER:"Other",PREFER_NOT_TO_SAY:"Prefer not to say"},a={HAPPY:"Happy",NEUTRAL:"Neutral",ANGRY:"Angry",SAD:"Sad",CONFUSED:"Confused",FRUSTRATED:"Frustrated",ANXIOUS:"Anxious",CALM:"Calm"},n={HAPPY:"\uD83D\uDE0A",NEUTRAL:"\uD83D\uDE10",ANGRY:"\uD83D\uDE20",SAD:"\uD83D\uDE22",CONFUSED:"\uD83E\uDD14",FRUSTRATED:"\uD83D\uDE24",ANXIOUS:"\uD83D\uDE30",CALM:"\uD83D\uDE0C"},i={HAPPY:"#10B981",NEUTRAL:"#6B7280",ANGRY:"#EF4444",SAD:"#3B82F6",CONFUSED:"#F59E0B",FRUSTRATED:"#F97316",ANXIOUS:"#8B5CF6",CALM:"#06B6D4"}},65522:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(32191),a=s(23607);function n(...e){return(0,a.m6)((0,r.W)(e))}},26584:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(42154).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},56603:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(42154).Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])},64990:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(42154).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},40563:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(42154).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},79047:function(e,t,s){"use strict";var r=s(41206);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[162,455,385,386,156,744],function(){return e(e.s=33858)}),_N_E=e.O()}]);